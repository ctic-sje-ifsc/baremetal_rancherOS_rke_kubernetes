---
nodes:
- address: nodenuvem1.sj.ifsc.edu.br
  role: [controlplane,worker,etcd]
  hostname_override: nodenuvem1
  user: rancher
  ssh_key_path: ~/.ssh/id_rsa
- address: nodenuvem2.sj.ifsc.edu.br
  role: [controlplane,worker,etcd]
  hostname_override: nodenuvem2
  user: rancher
  ssh_key_path: ~/.ssh/id_rsa
- address: nodenuvem3.sj.ifsc.edu.br
  role: [controlplane,worker,etcd]
  hostname_override: nodenuvem3
  user: rancher
  ssh_key_path: ~/.ssh/id_rsa
- address: nodenuvem4.sj.ifsc.edu.br
  role: [worker]
  hostname_override: nodenuvem4
  user: rancher
  ssh_key_path: ~/.ssh/id_rsa
- address: nodenuvem5.sj.ifsc.edu.br
  role: [worker]
  hostname_override: nodenuvem5
  user: rancher
  ssh_key_path: ~/.ssh/id_rsa

services:
  kube-api:
    extra_args:
      feature-gates: MountPropagation=true
      requestheader-client-ca-file: /etc/kubernetes/ssl/kube-ca.pem

  kubelet:
    extra_args:
      feature-gates: MountPropagation=true
      volume-plugin-dir: /var/lib/kubelet/volumeplugins    
    extra_binds:
      - "/var/lib/storageos:/var/lib/storageos:rshared" 

network:
  plugin: flannel

authentication:
  strategy: x509
  sans:
  - "api-cloud.sj.ifsc.edu.br"

system_images:
  kubernetes: rancher/k8s:v1.8.10-rancher1-1

ssh_key_path: ~/.ssh/id_rsa

authorization:
  mode: rbac

kubernetes_version: v1.8.10-rancher1-1

cluster_name: kubernifsc

ingress:
  provider: nginx
